<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‚öôÔ∏è O Laborat√≥rio de Visualiza√ß√£o</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/animate.css@4.1.1/animate.min.css" rel="stylesheet"/>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to right, #e0f7fa, #e8f5e9);
      padding: 1rem;
      color: #333;
    }

    header {
      background-color: #00796b;
      color: white;
      padding: 2rem 1rem;
      text-align: center;
      border-radius: 10px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
    }

    nav {
      display: flex;
      justify-content: center;
      gap: 1rem;
      margin-top: 1rem;
    }

    nav a {
      background-color: #004d40;
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      text-decoration: none;
      transition: background-color 0.3s;
    }

    nav a:hover {
      background-color: #00251a;
    }

    main {
      margin: 2rem auto;
      max-width: 960px;
      background-color: #ffffffcc;
      padding: 2rem;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }

    .narrador, .exemplo {
      background-color: #fff3cd;
      padding: 1rem;
      border-left: 4px solid #ffc107;
      border-radius: 6px;
      margin-bottom: 1rem;
      font-style: italic;
      animation: fadeInUp 1s;
    }

    .controls {
      margin-top: 1rem;
    }

    .controls label, .controls input, .controls select, .controls button {
      display: block;
      margin: 0.5rem 0;
    }

    .voltar {
      display: inline-block;
      margin-top: 2rem;
      color: #00796b;
      text-decoration: none;
    }

    button {
      background-color: #00796b;
      color: white;
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 6px;
      cursor: pointer;
      transition: background-color 0.3s;
    }

    button:hover {
      background-color: #004d40;
    }

    canvas {
      margin-top: 2rem;
      animation: fadeIn 1s;
    }
  </style>
</head>
<body>
  <header class="animate__animated animate__fadeInDown">
    <h1>üîß O Laborat√≥rio de Visualiza√ß√£o</h1>
    <p>Veja a Matem√°tica ganhar vida!</p>
    <nav>
      <a href="jogo.html">üß© Jogo</a>
      <a href="simulacao.html">üß™ Simula√ß√£o</a>
      <a href="graficos.html">üìä Gr√°ficos</a>
    </nav>
  </header>

  <main>
    <div class="narrador">
      Experimente digitar seus pr√≥prios dados e veja como os gr√°ficos se transformam!
    </div>

    <div class="exemplo">
      <strong>Desafio:</strong> Imagine que voc√™ √© um cientista analisando a rela√ß√£o entre o tempo de estudo (X) e a nota na prova (Y). Digite valores como:<br>
      X: 1, 2, 3, 4, 5<br>
      Y: 2, 4, 6, 7, 9<br>
      E tente prever a nota com base em horas de estudo!
    </div>

    <div class="controls animate__animated animate__fadeInUp">
      <label>Valores de X (separados por v√≠rgula):</label>
      <input type="text" id="valoresX" placeholder="Ex: 1, 2, 3, 4, 5">

      <label>Valores de Y (separados por v√≠rgula):</label>
      <input type="text" id="valoresY" placeholder="Ex: 2, 4, 6, 8, 10">

      <label>Valores de Y (s√©rie 2, opcional):</label>
      <input type="text" id="valoresY2" placeholder="Ex: 3, 6, 9, 12, 15">

      <label>Nome do eixo X:</label>
      <input type="text" id="nomeEixoX" placeholder="Ex: Horas de Estudo">

      <label>Nome do eixo Y:</label>
      <input type="text" id="nomeEixoY" placeholder="Ex: Nota na Prova">

      <label>Tipo de Gr√°fico:</label>
      <select id="tipoGrafico">
        <option value="line">Linha</option>
        <option value="bar">Barra</option>
        <option value="scatter">Dispers√£o</option>
      </select>

      <label>Cor da s√©rie 1:</label>
      <input type="color" id="cor1" value="#26a69a">

      <label>Cor da s√©rie 2:</label>
      <input type="color" id="cor2" value="#ef5350">

      <button onclick="atualizarGrafico()">Gerar Gr√°fico</button>
      <button onclick="salvarImagem()">Salvar Imagem</button>
      <button onclick="exportarCSV()">Exportar CSV</button>
    </div>

    <canvas id="meuGrafico" width="700" height="400"></canvas>

    <a href="index.html" class="voltar">‚¨Ö Voltar ao In√≠cio</a>
  </main>

  <script>
    let grafico;

    function atualizarGrafico() {
      const valoresX = document.getElementById("valoresX").value.split(',').map(Number);
      const valoresY = document.getElementById("valoresY").value.split(',').map(Number);
      const valoresY2 = document.getElementById("valoresY2").value.split(',').map(Number);
      const tipo = document.getElementById("tipoGrafico").value;
      const cor1 = document.getElementById("cor1").value;
      const cor2 = document.getElementById("cor2").value;
      const nomeEixoX = document.getElementById("nomeEixoX").value || 'X';
      const nomeEixoY = document.getElementById("nomeEixoY").value || 'Y';

      if (grafico) grafico.destroy();

      const ctx = document.getElementById('meuGrafico').getContext('2d');

      const datasets = [];

      datasets.push({
        label: 'S√©rie 1',
        data: tipo === 'scatter' ? valoresX.map((x, i) => ({ x, y: valoresY[i] })) : valoresY,
        backgroundColor: cor1 + '88',
        borderColor: cor1,
        borderWidth: 2,
        fill: false,
        tension: 0.3
      });

      if (valoresY2.length > 0 && valoresY2.every(x => !isNaN(x))) {
        datasets.push({
          label: 'S√©rie 2',
          data: tipo === 'scatter' ? valoresX.map((x, i) => ({ x, y: valoresY2[i] })) : valoresY2,
          backgroundColor: cor2 + '88',
          borderColor: cor2,
          borderWidth: 2,
          fill: false,
          tension: 0.3
        });
      }

      grafico = new Chart(ctx, {
        type: tipo,
        data: {
          labels: tipo === 'scatter' ? undefined : valoresX,
          datasets: datasets
        },
        options: {
          responsive: true,
          plugins: {
            legend: { display: true },
            title: {
              display: true,
              text: 'Seu Gr√°fico Interativo'
            }
          },
          scales: tipo === 'scatter' ? {
            x: { type: 'linear', position: 'bottom', title: { display: true, text: nomeEixoX } },
            y: { beginAtZero: true, title: { display: true, text: nomeEixoY } }
          } : {
            x: { title: { display: true, text: nomeEixoX } },
            y: { beginAtZero: true, title: { display: true, text: nomeEixoY } }
          }
        }
      });
    }

    function salvarImagem() {
      const link = document.createElement('a');
      link.download = 'grafico.png';
      link.href = document.getElementById('meuGrafico').toDataURL('image/png');
      link.click();
    }

    function exportarCSV() {
      const x = document.getElementById("valoresX").value.split(',');
      const y = document.getElementById("valoresY").value.split(',');
      const y2 = document.getElementById("valoresY2").value.split(',');
      let csv = 'X,S√©rie 1,S√©rie 2\n';
      for (let i = 0; i < x.length; i++) {
        csv += `${x[i]},${y[i] || ''},${y2[i] || ''}\n`;
      }
      const blob = new Blob([csv], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement("a");
      link.href = URL.createObjectURL(blob);
      link.download = "dados.csv";
      link.click();
    }
  </script>
</body>
</html>
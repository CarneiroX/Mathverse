<!DOCTYPE html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resumo de Sistemas Lineares e Matriz</title>
  <link rel="stylesheet" href="/css/quiz.css" />
</head>

<body>

  <a href="aprender.html" class="botao-voltar">‚úñ</a>

  <div class="container">
    <div class="lives" id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
    <div class="progress-bar">
      <div id="progress" class="progress"></div>
    </div>
    <div id="question" class="question">Carregando pergunta...</div>
    <div class="options">
      <button class="option" onclick="responder(0)">A</button>
      <button class="option" onclick="responder(1)">B</button>
      <button class="option" onclick="responder(2)">C</button>
      <button class="option" onclick="responder(3)">D</button>
    </div>
    <div class="controls">
      <button class="control-button" onclick="pular()">Pular</button>
      <button class="control-button" onclick="verificar()">Verificar</button>
    </div>
    <div id="feedback" class="feedback"></div>
  </div>

  <script>
    const perguntas = [
      {
        texto: "Um sistema linear √© formado por:",
        opcoes: [
          "Apenas uma equa√ß√£o e uma inc√≥gnita",
          "Duas ou mais equa√ß√µes com duas ou mais inc√≥gnitas",
          "Apenas equa√ß√µes quadr√°ticas",
          "Equa√ß√µes que n√£o t√™m inc√≥gnitas"
        ],
        correta: 1
      },
      {
        texto: "O que acontece quando multiplicamos qualquer matriz por uma matriz identidade do mesmo tamanho?",
        opcoes: [
          "A matriz √© zerada",
          "A matriz √© transposta",
          "A matriz permanece a mesma",
          "A matriz dobra os valores"
        ],
        correta: 2
      },
      {
        texto: "Se um sistema de equa√ß√µes possui solu√ß√£o √∫nica, ent√£o:",
        opcoes: ["As equa√ß√µes representam a mesma reta", "As equa√ß√µes n√£o se encontram", "O sistema √© imposs√≠vel", "As equa√ß√µes se interceptam em um ponto"],
        correta: 3
      },
      {
        texto: "A multiplica√ß√£o de uma matriz 2 x 2 por um n√∫mero real k significa:",
        opcoes: [
          "Multiplicar todos os elementos da matriz por k",
          "Trocar os elementos de posi√ß√£o",
          "Somar k a todos os elementos",
          "Dividir a matriz em duas"
        ],
        correta: 0
      },
      {
        texto: "Um sistema linear com duas equa√ß√µes e duas inc√≥gnitas tem uma √∫nica solu√ß√£o quando:",
        opcoes: [
          "As retas s√£o paralelas",
          "As retas s√£o coincidentes",
          "As retas se cruzam em um ponto",
          "As equa√ß√µes s√£o id√™nticas"
        ],
        correta: 2
      },
      {
        texto: "Um sistema √© considerado imposs√≠vel quando:",
        opcoes: ["Possui infinitas solu√ß√µes", "As equa√ß√µes representam retas paralelas que nunca se encontram", "Possui apenas uma solu√ß√£o", "Suas equa√ß√µes s√£o a mesma reta"],
        correta: 1
      },
      {
        texto: "Um sistema √© chamado de ‚Äúposs√≠vel e indeterminado‚Äù quando:",
        opcoes: ["N√£o tem solu√ß√£o", "Tem exatamente uma solu√ß√£o", "Tem infinitas solu√ß√µes", "Nenhuma das anteriores"],
        correta: 2
      }
    ];

    let indice = 0;
    let respostaSelecionada = null;
    let vidas = 4;
    let acertos = 0;
    let erros = 0;
    let pulos = 0;

    function atualizarStatus() {
      document.getElementById("lives").textContent = "‚ù§Ô∏è".repeat(vidas);
      document.getElementById("progress").style.width = ((indice) / perguntas.length) * 100 + "%";
    }

    function carregarPergunta() {
      if (vidas <= 0 || indice >= perguntas.length) return mostrarResultado();
      const pergunta = perguntas[indice];
      document.getElementById("question").textContent = pergunta.texto;
      const botoes = document.querySelectorAll(".option");
      botoes.forEach((btn, i) => {
        btn.textContent = pergunta.opcoes[i];
        btn.disabled = false;
        btn.style.backgroundColor = "#203037";
      });
      respostaSelecionada = null;
      document.getElementById("feedback").textContent = "";
      atualizarStatus();
    }

    function responder(i) {
      respostaSelecionada = i;
      document.querySelectorAll(".option").forEach((btn, index) => {
        btn.style.backgroundColor = index === i ? "#2a3a42" : "#203037";
      });
    }

    function verificar() {
      if (respostaSelecionada === null) return;
      const correta = perguntas[indice].correta;
      const feedback = document.getElementById("feedback");
      if (respostaSelecionada === correta) {
        acertos++;
        feedback.textContent = "‚úÖ Correto!";
      } else {
        erros++;
        vidas--;
        feedback.textContent = "‚ùå Incorreto!";
      }
      indice++;
      setTimeout(carregarPergunta, 1000);
    }

    function pular() {
      pulos++;
      indice++;
      carregarPergunta();
    }

    function mostrarResultado() {
      fetch('http://localhost:3000/usuarios/pontos-jogo', {
        method: 'POST',
        credentials: 'include',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          nome_jogo: 'sistemas_Lineares_Resumo',
          pontos: acertos
        })
      }).then(() => {
        document.querySelector(".container").innerHTML = `
      <div class='question'>üèÅ Resultado Final</div>
      <p class='feedback'>‚úîÔ∏è Acertos: ${acertos}</p>
      <p class='feedback'>‚ùå Erros: ${erros}</p>
      <p class='feedback'>‚è≠Ô∏è Pulos: ${pulos}</p>
      <button class="control-button" onclick="window.location.href='aprender.html'">Voltar Para a Trilha</button> 
    `;
      }).catch((error) => {
        console.error('Erro ao salvar pontos:', error);
      });
    }

    window.onload = carregarPergunta;
  </script>
</body>

</html>